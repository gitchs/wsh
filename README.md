# WSH - WebSocket Shell

WSH æ˜¯ä¸€ä¸ªåŸºäºŽ WebSocket çš„è¿œç¨‹ Shell å®¢æˆ·ç«¯ï¼Œå…è®¸æ‚¨é€šè¿‡ WebSocket è¿žæŽ¥åˆ°è¿œç¨‹ Shell æœåŠ¡å™¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ðŸ”Œ åŸºäºŽ WebSocket çš„è¿œç¨‹ Shell è¿žæŽ¥
- ðŸ“ æ”¯æŒé…ç½®æ–‡ä»¶ç®¡ç†å¤šä¸ªè¿žæŽ¥ç«¯ç‚¹
- ðŸ’“ æ™ºèƒ½å¿ƒè·³æœºåˆ¶ä¿æŒè¿žæŽ¥ç¨³å®š
- ðŸ–¥ï¸ è‡ªåŠ¨ç»ˆç«¯å¤§å°è°ƒæ•´
- ðŸŽ¯ æ”¯æŒ F12 å¿«æ·é”®é€€å‡ºè¿žæŽ¥
- ðŸ“Š è¯¦ç»†çš„æ—¥å¿—è®°å½•

## ç³»ç»Ÿè¦æ±‚

- Go 1.23.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼šLinuxã€macOSã€Windows

## å®‰è£…æŒ‡å—

### æ–¹æ³•ä¸€ï¼šä»Žæºç æž„å»ºï¼ˆæŽ¨èï¼‰

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/gitchs/wsh.git
   cd wsh
   ```

2. **æž„å»ºé¡¹ç›®**
   ```bash
   # æž„å»ºæ‰€æœ‰ç»„ä»¶
   make all
   
   # æˆ–è€…å•ç‹¬æž„å»º wsh
   make wsh
   
   # æˆ–è€…å•ç‹¬æž„å»º wcp
   make wcp
   ```

3. **å®‰è£…åˆ°ç³»ç»Ÿï¼ˆå¯é€‰ï¼‰**
   ```bash
   # å®‰è£…åˆ° /usr/local/bin/
   sudo make install
   
   # å¸è½½
   sudo make uninstall
   ```

### æ–¹æ³•äºŒï¼šç›´æŽ¥ä½¿ç”¨ Go å‘½ä»¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/gitchs/wsh.git
cd wsh

# æž„å»º wsh
go build -o wsh/wsh wsh/main.go

# æž„å»º wcp
go build -o wcp/wcp wcp/main.go
```

## é…ç½®æ–‡ä»¶è®¾ç½®

WSH ä½¿ç”¨ YAML æ ¼å¼çš„é…ç½®æ–‡ä»¶æ¥ç®¡ç†è¿žæŽ¥ç«¯ç‚¹ã€‚é»˜è®¤é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.config/wsh.yaml`

### åˆ›å»ºé…ç½®æ–‡ä»¶

1. **åˆ›å»ºé…ç½®ç›®å½•**
   ```bash
   mkdir -p ~/.config
   ```

2. **åˆ›å»ºé…ç½®æ–‡ä»¶**
   ```bash
   cat > ~/.config/wsh.yaml << 'EOF'
   endpoints:
     - name: "server1"
       url: "ws://your-server:8080/ws"
       description: "ç”Ÿäº§æœåŠ¡å™¨"
     
     - name: "server2"
       url: "wss://your-secure-server:8443/ws"
       description: "å®‰å…¨æœåŠ¡å™¨"
     
     - name: "local"
       url: "ws://localhost:8080/ws"
       description: "æœ¬åœ°å¼€å‘æœåŠ¡å™¨"
   EOF
   ```

### é…ç½®æ–‡ä»¶æ ¼å¼è¯´æ˜Ž

```yaml
endpoints:
  - name: "ç«¯ç‚¹åç§°"           # ç”¨äºŽè¿žæŽ¥æ—¶æŒ‡å®šçš„åç§°
    url: "WebSocket URL"      # WebSocket è¿žæŽ¥åœ°å€
    description: "æè¿°ä¿¡æ¯"    # ç«¯ç‚¹çš„æè¿°ä¿¡æ¯
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

1. **æŸ¥çœ‹å¯ç”¨ç«¯ç‚¹**
   ```bash
   ./wsh/wsh
   ```

2. **è¿žæŽ¥åˆ°é¢„å®šä¹‰ç«¯ç‚¹**
   ```bash
   ./wsh/wsh server1
   ```

3. **ç›´æŽ¥è¿žæŽ¥ WebSocket URL**
   ```bash
   ./wsh/wsh ws://your-server:8080/ws
   ```

### é«˜çº§é€‰é¡¹

```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
./wsh/wsh -c /path/to/config.yaml server1

# è®¾ç½®å¿ƒè·³é—´éš”ï¼ˆç§’ï¼‰
./wsh/wsh --heartbeat-interval 30 server1

# æŸ¥çœ‹å¸®åŠ©
./wsh/wsh --help
```

### å¿«æ·é”®æ“ä½œ

- **F12**: é€€å‡ºè¿žæŽ¥å¹¶å…³é—­ç¨‹åº
- **Ctrl+C**: å‘é€ä¸­æ–­ä¿¡å·åˆ°è¿œç¨‹ Shell
- **çª—å£å¤§å°è°ƒæ•´**: è‡ªåŠ¨åŒæ­¥ç»ˆç«¯å¤§å°åˆ°è¿œç¨‹æœåŠ¡å™¨

## é¡¹ç›®ç»“æž„

```
wsh/
â”œâ”€â”€ wsh/           # ä¸»ç¨‹åºç›®å½•
â”‚   â””â”€â”€ main.go    # WSH å®¢æˆ·ç«¯ä¸»ç¨‹åº
â”œâ”€â”€ wcp/           # WCP ç¨‹åºç›®å½•
â”‚   â””â”€â”€ main.go    # WCP ç¨‹åº
â”œâ”€â”€ wshutils/      # å·¥å…·åº“
â”‚   â””â”€â”€ connection.go
â”œâ”€â”€ go.mod         # Go æ¨¡å—æ–‡ä»¶
â”œâ”€â”€ go.sum         # Go ä¾èµ–æ ¡éªŒæ–‡ä»¶
â”œâ”€â”€ Makefile       # æž„å»ºè„šæœ¬
â””â”€â”€ README.md      # é¡¹ç›®è¯´æ˜Žæ–‡æ¡£
```

## ä¾èµ–é¡¹

- `github.com/gorilla/websocket` - WebSocket å®¢æˆ·ç«¯åº“
- `github.com/sirupsen/logrus` - æ—¥å¿—åº“
- `github.com/spf13/cobra` - å‘½ä»¤è¡Œç•Œé¢åº“
- `golang.org/x/term` - ç»ˆç«¯æ“ä½œåº“
- `gopkg.in/yaml.v3` - YAML è§£æžåº“

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿žæŽ¥å¤±è´¥**
   - æ£€æŸ¥ WebSocket URL æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥ç½‘ç»œè¿žæŽ¥å’Œé˜²ç«å¢™è®¾ç½®

2. **é…ç½®æ–‡ä»¶é”™è¯¯**
   - ç¡®ä¿ YAML æ ¼å¼æ­£ç¡®
   - æ£€æŸ¥æ–‡ä»¶æƒé™
   - éªŒè¯é…ç½®æ–‡ä»¶è·¯å¾„

3. **ç»ˆç«¯æ˜¾ç¤ºå¼‚å¸¸**
   - ç¨‹åºä¼šè‡ªåŠ¨é‡ç½®ç»ˆç«¯çŠ¶æ€
   - å¦‚æžœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨è¿è¡Œ `reset` å‘½ä»¤

### æ—¥å¿—æ–‡ä»¶

ç¨‹åºè¿è¡Œæ—¶ä¼šç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼š`/tmp/wsh-{PID}.txt`

## å¼€å‘

### æž„å»ºå¼€å‘ç‰ˆæœ¬

```bash
# æ¸…ç†æž„å»ºæ–‡ä»¶
make clean

# é‡æ–°æž„å»º
make all
```

### è¿è¡Œæµ‹è¯•

```bash
go test ./...
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

## è´¡çŒ®

æ¬¢è¿Žæäº¤ Issue å’Œ Pull Requestï¼

## æ›´æ–°æ—¥å¿—

- æ”¯æŒé…ç½®æ–‡ä»¶ç®¡ç†å¤šä¸ªç«¯ç‚¹
- æ·»åŠ æ™ºèƒ½å¿ƒè·³æœºåˆ¶
- æ”¯æŒç»ˆç«¯å¤§å°è‡ªåŠ¨è°ƒæ•´
- æ·»åŠ  F12 å¿«æ·é”®é€€å‡ºåŠŸèƒ½
- æ”¹è¿›æ—¥å¿—è®°å½•å’Œé”™è¯¯å¤„ç†
